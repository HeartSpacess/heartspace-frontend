<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confessions</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="scripts.js"></script>
</head>
<body>
    <header>
        <h1>Confessions</h1>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="forums.html">Community Forums</a></li>
                <li><a href="quizzes.html">Quizzes</a></li>
                <li><a href="confessions.html">Confessions</a></li>
                <li><a href="experts.html">Expert Advice</a></li>
                <li><a href="login.html">Login</a> | <a href="signup.html">Sign Up</a></li>
                <li><a href="guest.html">Guest Mode</a></li>
                <li><a href="friends.html">Find Friends</a></li>
                <li><a href="mood.html">Share Mood & Music</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="submit-confession">
            <h2>Share Your Confession Anonymously</h2>
            <form id="confession-form">
                <textarea id="confession-text" rows="4" placeholder="Write your confession here..." required></textarea>
                <button type="submit">Submit Confession</button>
            </form>
        </section>

        <section id="confession-list">
            <h2>Recent Confessions</h2>
            <ul id="confessions">
                <!-- Confessions will be dynamically added here -->
            </ul>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Relationship Community. All rights reserved.</p>
    </footer>

    <script>
        // JavaScript to handle form submission and display confessions
        document.getElementById("confession-form").addEventListener("submit", function(event) {
            event.preventDefault();
            let text = document.getElementById("confession-text").value;
            if (text.trim() !== "") {
                fetch('/api/confessions', {  // Replace with your backend API
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text: text })
                })
                .then(response => response.json())
                .then(data => {
                    let confessionsList = document.getElementById("confessions");
                    let newConfession = document.createElement("li");
                    newConfession.textContent = data.text;
                    confessionsList.prepend(newConfession);
                    document.getElementById("confession-text").value = ""; // Clear textarea
                })
                .catch(error => console.error("Error submitting confession:", error));
            }
        });

        // Load confessions from backend
        function loadConfessions() {
            fetch('/api/confessions')  // Replace with your backend API
                .then(response => response.json())
                .then(data => {
                    let confessionsList = document.getElementById("confessions");
                    confessionsList.innerHTML = ""; // Clear previous entries
                    data.forEach(confession => {
                        let li = document.createElement("li");
                        li.textContent = confession.text;
                        confessionsList.appendChild(li);
                    });
                })
                .catch(error => console.error("Error fetching confessions:", error));
        }

        // Load confessions on page load
        document.addEventListener("DOMContentLoaded", loadConfessions);
    </script>
</body>
</html>
